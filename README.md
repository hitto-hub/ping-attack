# ping

## Description

pingはDOS攻撃になり得るのかを検証したかった

## Usage

```shell
go build main.go
./main
```

## ざっくり結果

試したこと

- 毎秒10000回のpingを送信する
- wiresharkでパケットをキャプチャして、実際に送信されているか確認

結果

- 送信側(M1MacbookPro)はpingを送り始めた20秒から30秒経ったくらいで一度ほぼ全てpingが'not reachable'になった少し経つとまたpingが送れるようになる。これを繰り返す。

-wiresharkで確認したところ、requestとresponse合わせて実際は毎秒6000回のpingパケットが確認された
requestとresponseが合わさると、毎秒3000回のpingパケットが送信されていることになる

攻撃側(M2MacbookAir)

- cpu使用率は10%から50%程度まで増えた
- メモリ使用量は70%程度まで増えた
- ネットワーク使用量は1Mbps~3Mbps程度を行ったり来たりしていた

受信側

- cpu使用率はほぼ変わらなかった
- メモリ使用量もほぼ変わらなかった
- ネットワーク使用量は1Mbps~3Mbps程度を行ったり来たりしていた
- youtubeを開いたりしたが、pingの影響は感じなかった

総評
そこまで重い攻撃ではないと思われる、むしろ攻撃側の方が重い

## ざっくり考察

1. Pingパケットのサイズ
ICMP (Ping) パケット

ICMPヘッダー: 8バイト
デフォルトのPingデータ: 56バイト（デフォルトのペイロード）
IPヘッダー: 20バイト
イーサネットヘッダー: 14バイト
合計: 98バイト

98バイト/パケット × 10000パケット/秒 = 980,000バイト/秒
980,000バイト/秒 × 8ビット/バイト = 7,840,000ビット/秒

7.84 Mbps

計算上は10000回/秒のPingを送信すると、7.84 Mbpsの帯域幅を消費することになる

しかし、実際には1Mbps~3Mbps程度を行ったり来たりしていた

定期的にほぼ全てpingが'not reachable'になる現象について
pingを送信するときに、pingを受け取る側がpingを受け取るのに時間がかかり、pingを送信する側がpingを受け取る側にpingを送信することができなくなったとorなんらかの防衛機構が働いたと考えられる。知らんけど。

## まとめ

pingはDOS攻撃になり得るのかを検証したかったが、重い攻撃ではないと思われる、むしろ攻撃側の方が重いという結果になった
複数台で攻撃をするDDoS攻撃なら、帯域を圧迫することができるかもしれないなと思った

## 今後ためしたいこと

pingを送信する側がpingを受け取る側にpingを送信することができなくなったとき、pingを受け取る側がpingを受け取るのに時間がかかっているのか、それともなんらかの防衛機構が働いたのかを検証したい

pingのパケットサイズを変えれば、効率よく帯域を圧迫できるのかを検証したい

## 懸念点

このプログラムを実行してしまうと、停止した後でも実行した側のpcが毎秒50回程度pingを送信し続ける
なぜかはわからない
